<div class='main'>
  {{message}}
  <div [style.display]='customerDisplay'>
    <form #f="ngForm">
      From
      <input type="month" (ngModelChange)='update()' [(ngModel)]='startDate' name='startMonth' useValueAsDate> To
      <input type="month" (ngModelChange)='update()' [(ngModel)]='endDate' name='endMonth' useValueAsDate>
    </form>
    <h2>Total Spending</h2>
    <h3>$ {{spending}}</h3>
    <h2>Monthly Chart</h2>
    <div id='customerMonthly' style="display: block">
      <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions" [legend]="barChartLegend"
        [chartType]="barChartType">
      </canvas>
    </div>
  </div>
  <div [style.display]='agentDisplay'>
    <form #f="ngForm">
      From
      <input type="date" (ngModelChange)='update1()' [(ngModel)]='startDate1' name='startDate' useValueAsDate> To
      <input type="date" (ngModelChange)='update1()' [(ngModel)]='endDate1' name='endDate' useValueAsDate>
    </form>
    <h2>My Commision</h2>
    <h3>Total Commision</h3>
    <h4>$ {{commision}}</h4>
    <h3>Total Ticket Sold</h3>
    <h4>{{ticketsSold}}</h4>
    <h3>Average Commision</h3>
    <h4>{{averageCommision}}</h4>
    <h2>Top Customers</h2>
    <h3>6 Month Tickets Sold</h3>
    <canvas baseChart [datasets]="barChart1Data" [labels]="barChart1Labels" [options]="barChart1Options" [legend]="barChart1Legend"
      [chartType]="barChart1Type">
    </canvas>
    <h3>Past Year Commision</h3>
    <canvas baseChart [datasets]="barChart2Data" [labels]="barChart2Labels" [options]="barChart2Options" [legend]="barChart2Legend"
      [chartType]="barChart2Type">
    </canvas>
  </div>
  <div [style.display]='staffDisplay'>
    <h1>Sales Report</h1>
    <form #f="ngForm">
      From
      <input type="month" (ngModelChange)='update2()' [(ngModel)]='startDate2' name='startMonth' useValueAsDate> To
      <input type="month" (ngModelChange)='update2()' [(ngModel)]='endDate2' name='endMonth' useValueAsDate>
    </form>
    <h3>Total Tickets Sold</h3>
    <p>{{staffTicketsSold}}</p>
    <h3>Monthly Chart</h3>
    <div style="display: block">
      <canvas baseChart [datasets]="barChart3Data" [labels]="barChart3Labels" [options]="barChart3Options" [legend]="barChart3Legend"
        [chartType]="barChart3Type">
      </canvas>
    </div>
    <h1>Revenue</h1>
    <h3>Last Month</h3>
    <p>{{revenueMonth}}</p>
    <canvas baseChart [data]="barChart4Data" [labels]="barChart4Labels" [chartType]="barChart4Type" [colors]='doughnutChartColors'>
    </canvas>
    <h3>Last Year</h3>
    <p>{{revenueYear}}</p>
    <canvas baseChart [data]="barChart5Data" [labels]="barChart5Labels" [chartType]="barChart5Type" [colors]='doughnutChartColors'>
    </canvas>
    <h1>Top 3 Destinations</h1>
    <h3>3 Months</h3>
    <ul>
      <li *ngFor="let each of destination3 let i = index" [attr.data-index]="i">{{i+1}}. {{each[0]}}: {{each[1]}}
      </li>
    </ul>
    <h3>1 Year</h3>
    <ul>
      <li *ngFor="let each of destination1 let i = index" [attr.data-index]="i">{{i+1}}. {{each[0]}}: {{each[1]}}
      </li>
    </ul>
    <h1>Top 5 Booking Agents</h1>
    <h3>Tickets Sold in 30 days</h3>
    <ul>
      <li *ngFor="let each of staffTicketsSoldMonthly let i = index" [attr.data-index]="i">{{i+1}}. {{each[0]}}: {{each[1]}}
      </li>
    </ul>
    <h3>Ticket Sold in 1 Year</h3>
    <ul>
      <li *ngFor="let each of staffTicketsSoldYearly let i = index" [attr.data-index]="i">{{i+1}}. {{each[0]}}: {{each[1]}}
      </li>
    </ul>
    <h3>Commision Received in 1 Year</h3>
    <ul>
      <li *ngFor="let each of staffCommision let i = index" [attr.data-index]="i">{{i+1}}. {{each[0]}}: {{each[1]}}
      </li>
    </ul>
    <h1>Top 5 Customers</h1>
    <h3>1 Year</h3>
    <ul>
      <li *ngFor="let each of staffCustomer let i = index" [attr.data-index]="i">{{i+1}}. {{each[0]}}: {{each[1]}}
        <button (click)="showCustomerDetail(each[0])">Show Detail</button>
      </li>
      <div [style.display]='detailDisplay'>
        <h4>Flights Taken by {{detailEmail}}</h4>
        <li *ngFor="let each of staffDetail let i = index" [attr.data-index]="i">{{each.flight_num}}
        </li>
        <button (click)="detailDisplay='none'">Hide Detail</button>
      </div>
    </ul>
  </div>
</div>